<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ” MesChain Login Test Center</title>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            border-bottom: 2px solid #eee;
            padding-bottom: 20px;
        }

        .header h1 {
            color: #333;
            font-size: 32px;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 16px;
        }

        .system-status {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .status-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            border: 1px solid #e9ecef;
        }

        .status-card h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .status-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }

        .status-label {
            color: #666;
            font-weight: 500;
        }

        .status-value {
            color: #333;
            font-weight: bold;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #28a745;
            animation: pulse 2s infinite;
        }

        .status-indicator.warning {
            background: #ffc107;
        }

        .status-indicator.error {
            background: #dc3545;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .login-screens {
            margin-bottom: 40px;
        }

        .login-screens h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 24px;
        }

        .screen-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }

        .screen-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            border: 1px solid #ddd;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .screen-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .screen-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .screen-title {
            color: #333;
            font-size: 18px;
            font-weight: bold;
        }

        .screen-port {
            background: #007bff;
            color: white;
            padding: 4px 8px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
        }

        .screen-features {
            margin-bottom: 15px;
        }

        .feature-tag {
            display: inline-block;
            background: #e9ecef;
            color: #495057;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
            margin: 2px;
        }

        .screen-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: background-color 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: #007bff;
            color: white;
        }

        .btn-primary:hover {
            background: #0056b3;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }

        .btn-warning {
            background: #ffc107;
            color: #212529;
        }

        .btn-warning:hover {
            background: #e0a800;
        }

        .btn-info {
            background: #17a2b8;
            color: white;
        }

        .btn-info:hover {
            background: #138496;
        }

        .control-panel {
            background: #343a40;
            color: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .control-panel h2 {
            margin-bottom: 20px;
            font-size: 24px;
        }

        .control-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .user-tracking {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .user-tracking h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 24px;
        }

        .user-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .user-item {
            background: white;
            border-radius: 8px;
            padding: 15px;
            border: 1px solid #ddd;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #007bff;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .user-details {
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-weight: bold;
            color: #333;
        }

        .user-time {
            font-size: 12px;
            color: #666;
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid;
        }

        .alert-info {
            background: #d1ecf1;
            border-color: #b8daff;
            color: #0c5460;
        }

        .alert-success {
            background: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
        }

        .alert-warning {
            background: #fff3cd;
            border-color: #ffeaa7;
            color: #856404;
        }

        .footer {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid #eee;
            color: #666;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ” MesChain Login Test Center</h1>
            <p>TÃ¼m login ekranlarÄ±nÄ± test edin ve kullanÄ±cÄ± giriÅŸlerini izleyin</p>
        </div>

        <div class="alert alert-info">
            <strong>ğŸ¯ Sistem Aktif!</strong> Login audit sistemi, harita yeniden oluÅŸturma ve master kontrol sistemi Ã§alÄ±ÅŸÄ±yor.
        </div>

        <div class="system-status">
            <div class="status-card">
                <h3>ğŸ” Login Audit Sistemi</h3>
                <div class="status-item">
                    <span class="status-label">Durum:</span>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <div class="status-indicator"></div>
                        <span class="status-value">Aktif</span>
                    </div>
                </div>
                <div class="status-item">
                    <span class="status-label">Aktif KullanÄ±cÄ±lar:</span>
                    <span class="status-value" id="active-users-count">0</span>
                </div>
                <div class="status-item">
                    <span class="status-label">BugÃ¼nkÃ¼ GiriÅŸler:</span>
                    <span class="status-value" id="daily-logins-count">0</span>
                </div>
            </div>

            <div class="status-card">
                <h3>ğŸ—ºï¸ Harita Sistemi</h3>
                <div class="status-item">
                    <span class="status-label">Durum:</span>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <div class="status-indicator"></div>
                        <span class="status-value">Aktif</span>
                    </div>
                </div>
                <div class="status-item">
                    <span class="status-label">Aktif Haritalar:</span>
                    <span class="status-value" id="active-maps-count">0</span>
                </div>
                <div class="status-item">
                    <span class="status-label">Queue:</span>
                    <span class="status-value" id="queue-count">0</span>
                </div>
            </div>

            <div class="status-card">
                <h3>ğŸš€ Sistem SaÄŸlÄ±ÄŸÄ±</h3>
                <div class="status-item">
                    <span class="status-label">Aktif Portlar:</span>
                    <span class="status-value" id="active-ports-count">8</span>
                </div>
                <div class="status-item">
                    <span class="status-label">Sistem SaÄŸlÄ±ÄŸÄ±:</span>
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <div class="status-indicator"></div>
                        <span class="status-value">MÃ¼kemmel</span>
                    </div>
                </div>
                <div class="status-item">
                    <span class="status-label">Son GÃ¼ncelleme:</span>
                    <span class="status-value" id="last-update-time">Az Ã¶nce</span>
                </div>
            </div>
        </div>

        <div class="control-panel">
            <h2>ğŸ› ï¸ Master Kontrol Paneli</h2>
            <div class="control-actions">
                <button class="btn btn-success" onclick="openMasterDashboard()">ğŸ“Š Master Dashboard</button>
                <button class="btn btn-warning" onclick="regenerateAllMaps()">ğŸ”„ TÃ¼m HaritalarÄ± Yenile</button>
                <button class="btn btn-info" onclick="showAuditPanel()">ğŸ” Audit Panel</button>
                <button class="btn btn-primary" onclick="exportAllData()">ğŸ“¤ TÃ¼m Verileri DÄ±ÅŸa Aktar</button>
                <button class="btn btn-warning" onclick="restartAllSystems()">ğŸš€ Sistemleri Yeniden BaÅŸlat</button>
                <button class="btn btn-info" onclick="testAllLogins()">ğŸ§ª TÃ¼m GiriÅŸleri Test Et</button>
            </div>
        </div>

        <div class="login-screens">
            <h2>ğŸ–¥ï¸ Login EkranlarÄ±</h2>
            <div class="screen-grid">
                <div class="screen-card">
                    <div class="screen-header">
                        <div class="screen-title">ğŸ“Š Ana Dashboard</div>
                        <div class="screen-port">3000</div>
                    </div>
                    <div class="screen-features">
                        <span class="feature-tag">Audit</span>
                        <span class="feature-tag">Maps</span>
                        <span class="feature-tag">Security</span>
                        <span class="feature-tag">Analytics</span>
                    </div>
                    <div class="screen-actions">
                        <a href="port_3000_dashboard_with_login.html" target="_blank" class="btn btn-primary">ğŸš€ AÃ§</a>
                        <button class="btn btn-success" onclick="testLogin(3000)">ğŸ§ª Test</button>
                    </div>
                </div>

                <div class="screen-card">
                    <div class="screen-header">
                        <div class="screen-title">ğŸ§© Frontend Components</div>
                        <div class="screen-port">3001</div>
                    </div>
                    <div class="screen-features">
                        <span class="feature-tag">Audit</span>
                        <span class="feature-tag">Components</span>
                        <span class="feature-tag">UI</span>
                    </div>
                    <div class="screen-actions">
                        <a href="port_3001_frontend_components_with_login.html" target="_blank" class="btn btn-primary">ğŸš€ AÃ§</a>
                        <button class="btn btn-success" onclick="testLogin(3001)">ğŸ§ª Test</button>
                    </div>
                </div>

                <div class="screen-card">
                    <div class="screen-header">
                        <div class="screen-title">ğŸ‘‘ Super Admin</div>
                        <div class="screen-port">3002</div>
                    </div>
                    <div class="screen-features">
                        <span class="feature-tag">Audit</span>
                        <span class="feature-tag">Maps</span>
                        <span class="feature-tag">Security</span>
                        <span class="feature-tag">Admin</span>
                    </div>
                    <div class="screen-actions">
                        <a href="port_3002_super_admin_with_login.html" target="_blank" class="btn btn-primary">ğŸš€ AÃ§</a>
                        <button class="btn btn-success" onclick="testLogin(3002)">ğŸ§ª Test</button>
                    </div>
                </div>

                <div class="screen-card">
                    <div class="screen-header">
                        <div class="screen-title">ğŸ›’ Marketplace Hub</div>
                        <div class="screen-port">3003</div>
                    </div>
                    <div class="screen-features">
                        <span class="feature-tag">Audit</span>
                        <span class="feature-tag">Maps</span>
                        <span class="feature-tag">Marketplace</span>
                    </div>
                    <div class="screen-actions">
                        <a href="port_3003_marketplace_hub_with_login.html" target="_blank" class="btn btn-primary">ğŸš€ AÃ§</a>
                        <button class="btn btn-success" onclick="testLogin(3003)">ğŸ§ª Test</button>
                    </div>
                </div>

                <div class="screen-card">
                    <div class="screen-header">
                        <div class="screen-title">ğŸ”„ Cross Marketplace Admin</div>
                        <div class="screen-port">3009</div>
                    </div>
                    <div class="screen-features">
                        <span class="feature-tag">Audit</span>
                        <span class="feature-tag">Maps</span>
                        <span class="feature-tag">Marketplace</span>
                        <span class="feature-tag">Admin</span>
                    </div>
                    <div class="screen-actions">
                        <a href="port_3009_cross_marketplace_admin_with_login.html" target="_blank" class="btn btn-primary">ğŸš€ AÃ§</a>
                        <button class="btn btn-success" onclick="testLogin(3009)">ğŸ§ª Test</button>
                    </div>
                </div>

                <div class="screen-card">
                    <div class="screen-header">
                        <div class="screen-title">ğŸª Hepsiburada Specialist</div>
                        <div class="screen-port">3010</div>
                    </div>
                    <div class="screen-features">
                        <span class="feature-tag">Audit</span>
                        <span class="feature-tag">Maps</span>
                        <span class="feature-tag">Marketplace</span>
                        <span class="feature-tag">Specialist</span>
                    </div>
                    <div class="screen-actions">
                        <a href="port_3010_hepsiburada_specialist_with_login.html" target="_blank" class="btn btn-primary">ğŸš€ AÃ§</a>
                        <button class="btn btn-success" onclick="testLogin(3010)">ğŸ§ª Test</button>
                    </div>
                </div>

                <div class="screen-card">
                    <div class="screen-header">
                        <div class="screen-title">ğŸ” Login Server</div>
                        <div class="screen-port">3077</div>
                    </div>
                    <div class="screen-features">
                        <span class="feature-tag">Authentication</span>
                        <span class="feature-tag">Security</span>
                        <span class="feature-tag">API</span>
                    </div>
                    <div class="screen-actions">
                        <a href="http://localhost:3077" target="_blank" class="btn btn-primary">ğŸš€ AÃ§</a>
                        <button class="btn btn-success" onclick="testLogin(3077)">ğŸ§ª Test</button>
                    </div>
                </div>

                <div class="screen-card">
                    <div class="screen-header">
                        <div class="screen-title">ğŸ§ª Selinay Auth Test</div>
                        <div class="screen-port">Local</div>
                    </div>
                    <div class="screen-features">
                        <span class="feature-tag">Test</span>
                        <span class="feature-tag">Authentication</span>
                        <span class="feature-tag">Demo</span>
                    </div>
                    <div class="screen-actions">
                        <a href="SELINAY_AUTHENTICATION_TEST_PAGE.html" target="_blank" class="btn btn-primary">ğŸš€ AÃ§</a>
                        <button class="btn btn-success" onclick="testSelinayAuth()">ğŸ§ª Test</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="user-tracking">
            <h2>ğŸ‘¥ Aktif KullanÄ±cÄ± Takibi</h2>
            <div id="user-list" class="user-list">
                <!-- KullanÄ±cÄ±lar dinamik olarak eklenecek -->
            </div>
        </div>

        <div class="footer">
            <p>ğŸ” MesChain Login Test Center - TÃ¼m sistemler aktif ve hazÄ±r</p>
            <p>Son gÃ¼ncelleme: <span id="last-update">18 Haziran 2025</span></p>
        </div>
    </div>

    <!-- Load Dependencies -->
    <script src="login_audit_system.js"></script>
    <script src="login_activation_system.js"></script>
    <script src="map_regeneration_system.js"></script>
    <script src="master_login_integration.js"></script>

    <script>
        // Initialize test center
        class LoginTestCenter {
            constructor() {
                this.simulatedUsers = [];
                this.initializeTestCenter();
            }

            initializeTestCenter() {
                console.log('ğŸ§ª Login Test Center initializing...');
                this.loadSimulatedData();
                this.updateStatusDisplay();
                this.startAutoUpdates();

                // Add some simulated users
                this.addSimulatedUser('admin', 'Super Admin', 3002);
                this.addSimulatedUser('manager', 'Marketplace Manager', 3003);
                this.addSimulatedUser('specialist', 'Hepsiburada Specialist', 3010);
            }

            loadSimulatedData() {
                // Simulate some existing data
                if (window.loginAudit) {
                    // Add some test audit entries
                    const testUsers = [
                        { username: 'admin', port: '3002', ipAddress: '192.168.1.100' },
                        { username: 'manager', port: '3003', ipAddress: '192.168.1.101' },
                        { username: 'specialist', port: '3010', ipAddress: '192.168.1.102' }
                    ];

                    testUsers.forEach(user => {
                        window.loginAudit.logSuccessfulLogin(user, 'test_token_' + Date.now());
                    });
                }
            }

            updateStatusDisplay() {
                // Update status counters
                if (window.loginAudit) {
                    const activeUsers = window.loginAudit.getActiveUsers();
                    document.getElementById('active-users-count').textContent = activeUsers.length;

                    const recentLogins = window.loginAudit.getRecentLoginAttempts(24);
                    const successfulLogins = recentLogins.filter(login => login.success);
                    document.getElementById('daily-logins-count').textContent = successfulLogins.length;
                }

                if (window.mapRegen) {
                    const mapStatus = window.mapRegen.getRegenerationStatus();
                    document.getElementById('active-maps-count').textContent = mapStatus.activeMappings;
                    document.getElementById('queue-count').textContent = mapStatus.queueLength;
                }

                // Update timestamp
                document.getElementById('last-update-time').textContent = new Date().toLocaleTimeString();

                // Update user list
                this.updateUserList();
            }

            updateUserList() {
                const userList = document.getElementById('user-list');
                userList.innerHTML = '';

                if (this.simulatedUsers.length === 0) {
                    userList.innerHTML = '<div style="text-align: center; color: #666; padding: 20px;">HenÃ¼z aktif kullanÄ±cÄ± yok</div>';
                    return;
                }

                this.simulatedUsers.forEach(user => {
                    const userItem = document.createElement('div');
                    userItem.className = 'user-item';
                    userItem.innerHTML = `
                        <div class="user-info">
                            <div class="user-avatar">${user.username.charAt(0).toUpperCase()}</div>
                            <div class="user-details">
                                <div class="user-name">${user.displayName}</div>
                                <div class="user-time">Port ${user.port} - ${user.loginTime}</div>
                            </div>
                        </div>
                        <div class="status-indicator"></div>
                    `;
                    userList.appendChild(userItem);
                });
            }

            addSimulatedUser(username, displayName, port) {
                const user = {
                    username: username,
                    displayName: displayName,
                    port: port,
                    loginTime: new Date().toLocaleTimeString(),
                    ipAddress: '192.168.1.' + Math.floor(Math.random() * 255)
                };

                this.simulatedUsers.push(user);
                this.updateUserList();

                console.log(`ğŸ‘¤ Simulated user added: ${displayName} on port ${port}`);
            }

            startAutoUpdates() {
                // Update status every 30 seconds
                setInterval(() => {
                    this.updateStatusDisplay();
                }, 30000);
            }
        }

        // Global functions for button actions
        function openMasterDashboard() {
            if (window.masterLogin) {
                window.masterLogin.showDashboard();
            } else {
                alert('Master dashboard sistemi yÃ¼kleniyor...');
            }
        }

        function regenerateAllMaps() {
            if (window.mapRegen) {
                window.mapRegen.regenerateAllMaps();
                alert('ğŸ”„ TÃ¼m haritalar yeniden oluÅŸturuluyor...');
            } else {
                alert('Harita yeniden oluÅŸturma sistemi yÃ¼kleniyor...');
            }
        }

        function showAuditPanel() {
            if (window.loginAudit) {
                window.loginAudit.toggleAuditPanel();
            } else {
                alert('Login audit sistemi yÃ¼kleniyor...');
            }
        }

        function exportAllData() {
            if (window.masterLogin) {
                window.masterLogin.exportAllData();
            } else {
                alert('Master kontrol sistemi yÃ¼kleniyor...');
            }
        }

        function restartAllSystems() {
            if (window.masterLogin) {
                window.masterLogin.restartAllSystems();
            } else {
                alert('Master kontrol sistemi yÃ¼kleniyor...');
            }
        }

        function testAllLogins() {
            const ports = [3000, 3001, 3002, 3003, 3009, 3010, 3077];

            alert('ğŸ§ª TÃ¼m login ekranlarÄ± test ediliyor...\n\n' +
                  'Test edilecek portlar: ' + ports.join(', ') + '\n\n' +
                  'Her port iÃ§in yeni bir sekme aÃ§Ä±lacak.');

            ports.forEach((port, index) => {
                setTimeout(() => {
                    testLogin(port);
                }, index * 1000); // 1 second delay between each test
            });
        }

        function testLogin(port) {
            const testCredentials = {
                username: 'admin',
                password: 'admin123',
                port: port,
                timestamp: Date.now()
            };

            // Log test attempt
            if (window.loginAudit) {
                window.loginAudit.logLoginAttempt(testCredentials);

                // Simulate successful login after 1 second
                setTimeout(() => {
                    window.loginAudit.logSuccessfulLogin(testCredentials, 'test_token_' + Date.now());
                }, 1000);
            }

            console.log(`ğŸ§ª Testing login for port ${port}`);

            // Add visual feedback
            const button = event?.target;
            if (button) {
                const originalText = button.textContent;
                button.textContent = 'â³ Testing...';
                button.disabled = true;

                setTimeout(() => {
                    button.textContent = 'âœ… Tested';
                    setTimeout(() => {
                        button.textContent = originalText;
                        button.disabled = false;
                    }, 2000);
                }, 2000);
            }
        }

        function testSelinayAuth() {
            console.log('ğŸ§ª Testing Selinay Authentication System');

            // Simulate Selinay auth test
            if (window.selinayAuth) {
                window.selinayAuth.authenticateUser({
                    username: 'admin',
                    password: 'admin123'
                });
            }

            alert('ğŸ§ª Selinay Authentication test baÅŸlatÄ±ldÄ±!\n\nTest sayfasÄ± yeni sekmede aÃ§Ä±lacak.');
        }

        // Initialize test center when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Wait for all systems to load
            setTimeout(() => {
                window.testCenter = new LoginTestCenter();
                console.log('ğŸ§ª Login Test Center ready!');
            }, 2000);
        });

        // Update last update time every minute
        setInterval(() => {
            document.getElementById('last-update').textContent = new Date().toLocaleString('tr-TR');
        }, 60000);
    </script>
</body>
</html>
