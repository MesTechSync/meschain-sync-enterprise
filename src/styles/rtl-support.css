/**
 * RTL Support CSS
 * Priority 3: Multi-Language Enhancement
 * Right-to-Left language support for Arabic and other RTL languages
 * 
 * @version 3.0.0
 * @author MesChain Sync Team - Cursor Team Priority 3
 */

/* ==========================================================================
   RTL Base Styles
   ========================================================================== */

/* RTL Document Direction */
[dir="rtl"] {
  direction: rtl;
  text-align: right;
}

[dir="ltr"] {
  direction: ltr;
  text-align: left;
}

/* ==========================================================================
   RTL Typography
   ========================================================================== */

/* Arabic Font Stack */
.lang-ar,
[dir="rtl"] {
  font-family: 'Segoe UI', 'Tahoma', 'Geeza Pro', 'Arabic UI Text', 'Al Bayan', 'Traditional Arabic', 'Lucida Grande', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;
}

/* Improve Arabic text rendering */
.lang-ar {
  font-feature-settings: "liga" 1, "calt" 1, "kern" 1;
  text-rendering: optimizeLegibility;
  font-kerning: auto;
  font-variant-ligatures: common-ligatures;
}

/* RTL Number Formatting */
.lang-ar .number,
[dir="rtl"] .number {
  direction: ltr;
  unicode-bidi: embed;
}

/* ==========================================================================
   RTL Layout Utilities
   ========================================================================== */

/* Margin and Padding RTL Utilities */
.ml-auto-rtl {
  margin-inline-start: auto;
}

.mr-auto-rtl {
  margin-inline-end: auto;
}

.pl-rtl-1 { padding-inline-start: 0.25rem; }
.pl-rtl-2 { padding-inline-start: 0.5rem; }
.pl-rtl-3 { padding-inline-start: 0.75rem; }
.pl-rtl-4 { padding-inline-start: 1rem; }
.pl-rtl-5 { padding-inline-start: 1.25rem; }
.pl-rtl-6 { padding-inline-start: 1.5rem; }

.pr-rtl-1 { padding-inline-end: 0.25rem; }
.pr-rtl-2 { padding-inline-end: 0.5rem; }
.pr-rtl-3 { padding-inline-end: 0.75rem; }
.pr-rtl-4 { padding-inline-end: 1rem; }
.pr-rtl-5 { padding-inline-end: 1.25rem; }
.pr-rtl-6 { padding-inline-end: 1.5rem; }

/* Border Radius RTL */
.rounded-l-rtl {
  border-start-start-radius: 0.375rem;
  border-end-start-radius: 0.375rem;
}

.rounded-r-rtl {
  border-start-end-radius: 0.375rem;
  border-end-end-radius: 0.375rem;
}

/* ==========================================================================
   RTL Flexbox and Grid
   ========================================================================== */

/* Flex Direction RTL */
.flex-row-rtl {
  flex-direction: row;
}

[dir="rtl"] .flex-row-rtl {
  flex-direction: row-reverse;
}

.flex-row-reverse-rtl {
  flex-direction: row-reverse;
}

[dir="rtl"] .flex-row-reverse-rtl {
  flex-direction: row;
}

/* Text Alignment RTL */
.text-left-rtl {
  text-align: start;
}

.text-right-rtl {
  text-align: end;
}

/* ==========================================================================
   Microsoft 365 Component RTL Overrides
   ========================================================================== */

/* MS365 Button RTL */
[dir="rtl"] .ms365-button {
  text-align: center;
}

[dir="rtl"] .ms365-button .icon {
  margin-inline-start: 0.5rem;
  margin-inline-end: 0;
}

[dir="rtl"] .ms365-button .icon-only {
  margin: 0;
}

/* MS365 Card RTL */
[dir="rtl"] .ms365-card {
  text-align: start;
}

[dir="rtl"] .ms365-card .header-actions {
  margin-inline-start: auto;
  margin-inline-end: 0;
}

/* MS365 Form RTL */
[dir="rtl"] .ms365-form .form-group {
  text-align: start;
}

[dir="rtl"] .ms365-form label {
  text-align: start;
}

[dir="rtl"] .ms365-form .input-group .icon {
  right: auto;
  left: 0.75rem;
}

[dir="rtl"] .ms365-form .input-group input {
  padding-inline-start: 2.5rem;
  padding-inline-end: 0.75rem;
}

/* MS365 Navigation RTL */
[dir="rtl"] .ms365-nav {
  padding-inline-start: 0;
  padding-inline-end: 1rem;
}

[dir="rtl"] .ms365-nav .nav-item {
  margin-inline-start: 0.5rem;
  margin-inline-end: 0;
}

[dir="rtl"] .ms365-nav .nav-item .icon {
  margin-inline-start: 0.5rem;
  margin-inline-end: 0;
}

/* MS365 Sidebar RTL */
[dir="rtl"] .ms365-sidebar {
  right: 0;
  left: auto;
}

[dir="rtl"] .ms365-sidebar.collapsed {
  transform: translateX(100%);
}

/* MS365 Dropdown RTL */
[dir="rtl"] .ms365-dropdown {
  right: 0;
  left: auto;
}

[dir="rtl"] .ms365-dropdown .dropdown-item {
  text-align: start;
  padding-inline-start: 1rem;
  padding-inline-end: 2rem;
}

[dir="rtl"] .ms365-dropdown .dropdown-item .icon {
  margin-inline-start: 0.5rem;
  margin-inline-end: 0;
}

/* ==========================================================================
   Language Switcher RTL
   ========================================================================== */

[dir="rtl"] .language-switcher .dropdown-trigger {
  text-align: start;
}

[dir="rtl"] .language-switcher .flag {
  margin-inline-start: 0.5rem;
  margin-inline-end: 0;
}

[dir="rtl"] .language-switcher .dropdown-arrow {
  margin-inline-start: 0;
  margin-inline-end: 0.5rem;
}

[dir="rtl"] .language-option-card {
  text-align: start;
}

[dir="rtl"] .language-option-card .progress {
  margin-inline-start: 0;
  margin-inline-end: 0.5rem;
}

/* ==========================================================================
   Category Mapping RTL
   ========================================================================== */

[dir="rtl"] .category-mapper {
  text-align: start;
}

[dir="rtl"] .category-tree {
  text-align: start;
}

[dir="rtl"] .category-tree .tree-node {
  padding-inline-start: 0;
  padding-inline-end: 1rem;
}

[dir="rtl"] .category-tree .tree-node.has-children::before {
  right: auto;
  left: 0.5rem;
}

[dir="rtl"] .category-tree .tree-expand-icon {
  margin-inline-start: 0.25rem;
  margin-inline-end: 0;
}

[dir="rtl"] .mapping-suggestion {
  text-align: start;
}

[dir="rtl"] .mapping-suggestion .confidence-badge {
  margin-inline-start: 0;
  margin-inline-end: 0.5rem;
}

/* Drag and Drop RTL */
[dir="rtl"] .drag-source {
  cursor: grab;
}

[dir="rtl"] .drag-source:active {
  cursor: grabbing;
}

[dir="rtl"] .drop-zone {
  border-radius: 0.375rem;
  border-style: dashed;
}

[dir="rtl"] .drop-zone.active {
  border-color: #3b82f6;
  background-color: #eff6ff;
}

/* ==========================================================================
   Data Table RTL
   ========================================================================== */

[dir="rtl"] .ms365-data-grid {
  text-align: start;
}

[dir="rtl"] .ms365-data-grid th {
  text-align: start;
}

[dir="rtl"] .ms365-data-grid td {
  text-align: start;
}

[dir="rtl"] .ms365-data-grid .sort-icon {
  margin-inline-start: 0.25rem;
  margin-inline-end: 0;
}

[dir="rtl"] .ms365-data-grid .pagination {
  justify-content: flex-start;
}

[dir="rtl"] .ms365-data-grid .pagination .page-item {
  margin-inline-start: 0.25rem;
  margin-inline-end: 0;
}

/* ==========================================================================
   Charts and Analytics RTL
   ========================================================================== */

[dir="rtl"] .ms365-chart {
  text-align: center;
}

[dir="rtl"] .chart-legend {
  text-align: start;
}

[dir="rtl"] .chart-legend .legend-item {
  margin-inline-start: 1rem;
  margin-inline-end: 0;
}

[dir="rtl"] .stats-card {
  text-align: center;
}

[dir="rtl"] .stats-card .icon {
  margin-inline-start: 0.5rem;
  margin-inline-end: 0;
}

/* ==========================================================================
   Modal and Dialog RTL
   ========================================================================== */

[dir="rtl"] .modal {
  text-align: start;
}

[dir="rtl"] .modal-header {
  text-align: start;
}

[dir="rtl"] .modal-header .close-button {
  margin-inline-start: auto;
  margin-inline-end: 0;
}

[dir="rtl"] .modal-footer {
  justify-content: flex-start;
}

[dir="rtl"] .modal-footer .button-group {
  margin-inline-start: 0;
  margin-inline-end: 0.5rem;
}

/* ==========================================================================
   Notification and Toast RTL
   ========================================================================== */

[dir="rtl"] .notification {
  right: auto;
  left: 1rem;
  text-align: start;
}

[dir="rtl"] .notification .icon {
  margin-inline-start: 0.5rem;
  margin-inline-end: 0;
}

[dir="rtl"] .notification .close-button {
  right: auto;
  left: 0.5rem;
}

[dir="rtl"] .toast {
  text-align: start;
}

[dir="rtl"] .toast .progress-bar {
  right: auto;
  left: 0;
}

/* ==========================================================================
   Responsive RTL
   ========================================================================== */

/* Mobile RTL Adjustments */
@media (max-width: 768px) {
  [dir="rtl"] .mobile-nav {
    right: 0;
    left: auto;
    transform: translateX(100%);
  }

  [dir="rtl"] .mobile-nav.open {
    transform: translateX(0);
  }

  [dir="rtl"] .mobile-menu-button {
    margin-inline-start: auto;
    margin-inline-end: 0;
  }
}

/* Tablet RTL Adjustments */
@media (min-width: 769px) and (max-width: 1024px) {
  [dir="rtl"] .tablet-sidebar {
    right: 0;
    left: auto;
  }

  [dir="rtl"] .tablet-main-content {
    margin-inline-start: 0;
    margin-inline-end: 250px;
  }
}

/* ==========================================================================
   Print RTL Styles
   ========================================================================== */

@media print {
  [dir="rtl"] * {
    text-align: start !important;
  }

  [dir="rtl"] .page-header {
    text-align: center !important;
  }

  [dir="rtl"] .page-footer {
    text-align: center !important;
  }
}

/* ==========================================================================
   Accessibility RTL
   ========================================================================== */

/* Screen Reader RTL Support */
[dir="rtl"] .sr-only {
  direction: rtl;
}

/* Focus Indicators RTL */
[dir="rtl"] .focus-ring:focus {
  outline-offset: 2px;
}

/* High Contrast RTL */
@media (prefers-contrast: high) {
  [dir="rtl"] .high-contrast {
    border: 2px solid currentColor;
  }
}

/* Reduced Motion RTL */
@media (prefers-reduced-motion: reduce) {
  [dir="rtl"] * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* ==========================================================================
   Language-Specific RTL Styles
   ========================================================================== */

/* Arabic Specific */
.lang-ar {
  line-height: 1.7;
  word-spacing: 0.1em;
}

.lang-ar .arabic-numerals {
  font-family: 'Arabic UI Text', 'Al Bayan', 'Traditional Arabic', monospace;
}

.lang-ar .latin-numerals {
  direction: ltr;
  unicode-bidi: embed;
  font-family: 'Segoe UI', 'Tahoma', sans-serif;
}

/* Hebrew Specific */
.lang-he {
  font-family: 'Segoe UI', 'Tahoma', 'Helvetica Neue', 'Arial Hebrew', 'Gisha', 'Lucida Grande', sans-serif;
  line-height: 1.6;
}

/* Persian/Farsi Specific */
.lang-fa {
  font-family: 'Segoe UI', 'Tahoma', 'Iranian Sans', 'Helvetica Neue', 'Arial', sans-serif;
  line-height: 1.8;
}

/* Urdu Specific */
.lang-ur {
  font-family: 'Segoe UI', 'Tahoma', 'Urdu Typesetting', 'Arial Unicode MS', sans-serif;
  line-height: 1.8;
}

/* ==========================================================================
   RTL Animation Adjustments
   ========================================================================== */

/* Slide Animations RTL */
@keyframes slideInRight-rtl {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slideInLeft-rtl {
  from {
    transform: translateX(-100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

[dir="rtl"] .slide-in-right {
  animation: slideInLeft-rtl 0.3s ease-out;
}

[dir="rtl"] .slide-in-left {
  animation: slideInRight-rtl 0.3s ease-out;
}

/* Rotation Animations RTL */
[dir="rtl"] .rotate-icon {
  transform: scaleX(-1);
}

[dir="rtl"] .dropdown-arrow.open {
  transform: scaleX(-1) rotate(180deg);
}

/* ==========================================================================
   Debug and Development RTL
   ========================================================================== */

/* RTL Debug Mode */
.rtl-debug [dir="rtl"] * {
  outline: 1px dashed red;
}

.rtl-debug [dir="rtl"] *::before {
  content: "RTL";
  position: absolute;
  top: 0;
  right: 0;
  background: red;
  color: white;
  font-size: 10px;
  padding: 2px 4px;
  z-index: 9999;
} 